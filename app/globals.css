@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --foreground-rgb: 15, 23, 42; /* text-DEFAULT */
    --background-start-rgb: 247, 247, 249; /* background */
    --background-end-rgb: 247, 247, 249;
    
    /* Z-index scale for layering */
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-toast: 1060;
  }

  html {
    scroll-padding-top: 80px; /* Header height + buffer for anchor links */
  }

  body {
    @apply text-text bg-background antialiased;
    font-family: Inter, system-ui, -apple-system, sans-serif;
  }

  /* Ensure all interactive elements have visible focus */
  *:focus-visible {
    @apply outline-none ring-2 ring-focus ring-offset-2;
    border-radius: 4px;
  }
  
  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Buttons - Enhanced with gradients, shadows and animations */
  .btn-primary {
    @apply bg-gradient-to-r from-brand to-brand-700 text-white font-semibold rounded-xl shadow-lg
           hover:shadow-xl hover:from-brand-600 hover:to-brand-800
           disabled:opacity-50 disabled:cursor-not-allowed 
           transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]
           focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2;
    /* Ensure minimum 44px touch target */
    @apply px-4 py-3 min-h-[44px] sm:px-5 sm:py-3 md:px-6 md:py-3;
  }

  .btn-secondary {
    @apply bg-white text-brand border-2 border-brand font-semibold rounded-xl shadow-md
           hover:shadow-lg hover:bg-brand-50 hover:border-brand-600
           disabled:opacity-50 disabled:cursor-not-allowed 
           transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]
           focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2;
    /* Ensure minimum 44px touch target */
    @apply px-4 py-3 min-h-[44px] sm:px-5 sm:py-3 md:px-6 md:py-3;
  }

  /* Enhanced destructive button */
  .btn-destructive {
    @apply bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl shadow-lg
           hover:shadow-xl hover:from-red-600 hover:to-red-700
           disabled:opacity-50 disabled:cursor-not-allowed 
           transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]
           focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2;
    @apply px-4 py-3 min-h-[44px] sm:px-5 sm:py-3 md:px-6 md:py-3;
  }

  /* Outline/ghost button variant */
  .btn-outline {
    @apply bg-white text-gray-700 border-2 border-gray-200 font-semibold rounded-xl shadow-md
           hover:shadow-lg hover:bg-gray-50 hover:border-gray-300
           disabled:opacity-50 disabled:cursor-not-allowed 
           transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]
           focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2;
    @apply px-4 py-3 min-h-[44px] sm:px-5 sm:py-3 md:px-6 md:py-3;
  }

  /* Design System Utility Classes - Phase 0 Quick Wins */
  
  /* Standard Card Components */
  .card-standard {
    @apply bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow;
  }
  
  .card-padding {
    @apply p-4 md:p-6;
  }
  
  .card-padding-compact {
    @apply p-4 md:p-5;
  }
  
  .card-padding-spacious {
    @apply p-6 md:p-8;
  }

  /* Info/Alert Banner Components */
  .banner-info {
    @apply bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6;
  }
  
  .banner-success {
    @apply bg-green-50 border border-green-200 rounded-xl p-4 mb-6;
  }
  
  .banner-warning {
    @apply bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6;
  }
  
  .banner-error {
    @apply bg-red-50 border border-red-200 rounded-xl p-4 mb-6;
  }

  /* Banner Content Styling */
  .banner-content {
    @apply flex items-start gap-3;
  }
  
  .banner-icon {
    @apply text-2xl flex-shrink-0;
  }
  
  .banner-title {
    @apply font-semibold mb-1;
  }
  
  .banner-title-info {
    @apply text-blue-900;
  }
  
  .banner-title-success {
    @apply text-green-900;
  }
  
  .banner-title-warning {
    @apply text-yellow-900;
  }
  
  .banner-title-error {
    @apply text-red-900;
  }
  
  .banner-description {
    @apply text-sm;
  }
  
  .banner-description-info {
    @apply text-blue-700;
  }
  
  .banner-description-success {
    @apply text-green-700;
  }
  
  .banner-description-warning {
    @apply text-yellow-700;
  }
  
  .banner-description-error {
    @apply text-red-700;
  }

  /* Status Badge Utilities */
  .status-badge {
    @apply inline-flex items-center gap-2 rounded-full font-medium transition-colors;
  }
  
  .status-badge-sm {
    @apply px-2.5 py-0.5 text-xs;
  }
  
  .status-badge-md {
    @apply px-3 py-1 text-sm;
  }
  
  .status-badge-lg {
    @apply px-4 py-2 text-base;
  }
  
  .status-badge-blue {
    @apply bg-blue-100 text-blue-800 border border-blue-200;
  }
  
  .status-badge-green {
    @apply bg-green-100 text-green-800 border border-green-200;
  }
  
  .status-badge-yellow {
    @apply bg-yellow-100 text-yellow-800 border border-yellow-200;
  }
  
  .status-badge-red {
    @apply bg-red-100 text-red-800 border border-red-200;
  }
  
  .status-badge-purple {
    @apply bg-purple-100 text-purple-800 border border-purple-200;
  }
  
  .status-badge-gray {
    @apply bg-gray-100 text-gray-800 border border-gray-200;
  }

  /* Price Display Components */
  .price-display {
    @apply bg-white rounded-lg border border-gray-200 px-4 py-3 shadow-sm;
  }
  
  .price-amount {
    @apply text-3xl font-bold text-gray-900;
  }
  
  .price-label {
    @apply text-sm font-medium text-gray-600;
  }
  
  .price-summary {
    @apply bg-brand-50 rounded-xl p-4 border border-brand-100;
  }
  
  .price-summary-row {
    @apply flex justify-between text-sm;
  }
  
  .price-summary-total {
    @apply flex justify-between items-center pt-2 border-t border-brand-200;
  }
  
  .price-summary-total-amount {
    @apply text-2xl font-bold text-brand-700;
  }

  /* Typography Utilities */
  .heading-page {
    @apply text-3xl md:text-4xl font-bold text-text mb-4;
  }
  
  .heading-section {
    @apply text-xl md:text-2xl font-bold text-text mb-4;
  }
  
  .heading-card {
    @apply text-base md:text-lg font-semibold text-text mb-3;
  }
  
  .text-body {
    @apply text-base text-text-secondary leading-relaxed;
  }
  
  .text-small {
    @apply text-sm text-text-tertiary;
  }
  
  .text-micro {
    @apply text-xs text-text-tertiary;
  }

  /* Button size variants */
  .btn-sm {
    @apply px-3 py-2 text-sm min-h-[36px];
  }

  .btn-md {
    /* Default size - already defined above */
  }

  .btn-lg {
    @apply px-6 py-4 text-lg min-h-[52px];
  }

  .btn-loading {
    @apply relative text-transparent;
  }

  .btn-loading::after {
    content: '';
    @apply absolute inset-0 m-auto w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin;
  }

  /* Input Fields - PRD Spec: 48px height (iOS standard), 12px radius, 2px focus ring */
  .input-field {
    @apply block w-full h-12 rounded-input border border-border 
           px-4 py-3
           text-text placeholder:text-text-muted
           focus:border-brand focus:ring-2 focus:ring-brand focus:ring-opacity-20 
           disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
           outline-none transition-all duration-150;
  }

  .input-error {
    @apply border-error focus:border-error focus:ring-error;
  }

  .input-helper {
    @apply text-sm text-text-tertiary mt-1;
  }

  .input-error-text {
    @apply text-sm text-error mt-1;
  }

  /* Cards - PRD Spec: 16-20px radius, shadow-md */
  .card {
    @apply bg-surface rounded-card shadow-md border border-border;
    /* Responsive padding */
    @apply p-4 sm:p-5 md:p-6 lg:p-card;
  }

  .card-compact {
    @apply bg-surface rounded-card shadow-md border border-border;
    @apply p-3 sm:p-4 md:p-5;
  }

  .card-hover {
    @apply transition-shadow duration-200 hover:shadow-lg;
  }

  /* Time Slot Cards */
  .slot-card {
    @apply flex items-center justify-between p-4 border-2 border-border rounded-input
           cursor-pointer transition-all duration-150
           hover:bg-gray-50 hover:border-gray-300;
  }

  .slot-card-selected {
    @apply border-brand bg-brand-50 hover:bg-brand-50 hover:border-brand;
  }

  .slot-card-disabled {
    @apply opacity-50 cursor-not-allowed hover:bg-white hover:border-border;
  }

  /* Badges - PRD Spec */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold;
  }

  .badge-neutral {
    @apply bg-gray-100 text-gray-800;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-700;
  }

  .badge-success {
    @apply bg-success-100 text-success-700;
  }

  .badge-error {
    @apply bg-error-100 text-error-700;
  }

  /* Modal - PRD Spec: fade+scale animation */
  .modal-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 z-40 animate-fade-in;
  }

  .modal-content {
    @apply bg-white rounded-card shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto
           animate-scale-in;
  }

  /* Typography - PRD Spec */
  .heading-1 {
    @apply text-2xl font-bold text-text;
  }

  .heading-2 {
    @apply text-xl font-semibold text-text;
  }

  .body {
    @apply text-base text-text;
  }

  .small {
    @apply text-sm text-text-secondary;
  }

  .label {
    @apply text-xs font-semibold text-text uppercase tracking-wide;
  }

  /* Dense form cards for mobile - local scope */
  .ui-dense {
    font-size: 0.9375rem;   /* ~15px */
    line-height: 1.25rem;
  }

  .ui-dense .input-field,
  .ui-dense input[type="text"],
  .ui-dense input[type="tel"],
  .ui-dense input[type="date"],
  .ui-dense select {
    padding-top: 0.5rem;    /* py-2 */
    padding-bottom: 0.5rem;
  }

  .ui-dense textarea {
    padding: 0.5rem 0.75rem;
  }

  .ui-dense h2 {
    font-size: 1rem;         /* text-base */
    margin-bottom: 0.75rem;  /* mb-3 */
  }

  .ui-dense .space-y-4 > * + * {
    margin-top: 0.75rem;     /* space-y-3 */
  }
}
