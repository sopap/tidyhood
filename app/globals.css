@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --foreground-rgb: 15, 23, 42; /* text-DEFAULT */
    --background-start-rgb: 247, 247, 249; /* background */
    --background-end-rgb: 247, 247, 249;
  }

  body {
    @apply text-text bg-background antialiased;
    font-family: Inter, system-ui, -apple-system, sans-serif;
  }

  /* Ensure all interactive elements have visible focus */
  *:focus-visible {
    @apply outline-none ring-2 ring-focus ring-offset-2;
  }
}

@layer components {
  /* Buttons - PRD Spec with responsive touch targets */
  .btn-primary {
    @apply bg-brand text-white rounded-input font-medium 
           hover:bg-brand-700 active:bg-brand-800
           disabled:opacity-50 disabled:cursor-not-allowed 
           transition-colors duration-150
           focus-visible:ring-2 focus-visible:ring-focus focus-visible:ring-offset-2;
    /* Ensure minimum 44px touch target */
    @apply px-4 py-3 min-h-[44px] sm:px-5 sm:py-3 md:px-6 md:py-3;
  }

  .btn-secondary {
    @apply bg-white text-brand border-2 border-brand rounded-input font-medium 
           hover:bg-brand-50 active:bg-brand-100
           disabled:opacity-50 disabled:cursor-not-allowed 
           transition-colors duration-150
           focus-visible:ring-2 focus-visible:ring-focus focus-visible:ring-offset-2;
    /* Ensure minimum 44px touch target */
    @apply px-4 py-3 min-h-[44px] sm:px-5 sm:py-3 md:px-6 md:py-3;
  }

  /* Button size variants */
  .btn-sm {
    @apply px-3 py-2 text-sm min-h-[36px];
  }

  .btn-md {
    /* Default size - already defined above */
  }

  .btn-lg {
    @apply px-6 py-4 text-lg min-h-[52px];
  }

  .btn-loading {
    @apply relative text-transparent;
  }

  .btn-loading::after {
    content: '';
    @apply absolute inset-0 m-auto w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin;
  }

  /* Input Fields - PRD Spec: 44px height, 12px radius, 2px focus ring */
  .input-field {
    @apply block w-full h-11 rounded-input border border-border 
           px-4 py-2.5
           text-text placeholder:text-text-muted
           focus:border-brand focus:ring-2 focus:ring-brand focus:ring-opacity-20 
           disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed
           outline-none transition-all duration-150;
  }

  .input-error {
    @apply border-error focus:border-error focus:ring-error;
  }

  .input-helper {
    @apply text-sm text-text-tertiary mt-1;
  }

  .input-error-text {
    @apply text-sm text-error mt-1;
  }

  /* Cards - PRD Spec: 16-20px radius, shadow-md */
  .card {
    @apply bg-surface rounded-card shadow-md border border-border;
    /* Responsive padding */
    @apply p-4 sm:p-5 md:p-6 lg:p-card;
  }

  .card-compact {
    @apply bg-surface rounded-card shadow-md border border-border;
    @apply p-3 sm:p-4 md:p-5;
  }

  .card-hover {
    @apply transition-shadow duration-200 hover:shadow-lg;
  }

  /* Time Slot Cards */
  .slot-card {
    @apply flex items-center justify-between p-4 border-2 border-border rounded-input
           cursor-pointer transition-all duration-150
           hover:bg-gray-50 hover:border-gray-300;
  }

  .slot-card-selected {
    @apply border-brand bg-brand-50 hover:bg-brand-50 hover:border-brand;
  }

  .slot-card-disabled {
    @apply opacity-50 cursor-not-allowed hover:bg-white hover:border-border;
  }

  /* Badges - PRD Spec */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold;
  }

  .badge-neutral {
    @apply bg-gray-100 text-gray-800;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-700;
  }

  .badge-success {
    @apply bg-success-100 text-success-700;
  }

  .badge-error {
    @apply bg-error-100 text-error-700;
  }

  /* Modal - PRD Spec: fade+scale animation */
  .modal-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 z-40 animate-fade-in;
  }

  .modal-content {
    @apply bg-white rounded-card shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto
           animate-scale-in;
  }

  /* Typography - PRD Spec */
  .heading-1 {
    @apply text-2xl font-bold text-text;
  }

  .heading-2 {
    @apply text-xl font-semibold text-text;
  }

  .body {
    @apply text-base text-text;
  }

  .small {
    @apply text-sm text-text-secondary;
  }

  .label {
    @apply text-xs font-semibold text-text uppercase tracking-wide;
  }

  /* Dense form cards for mobile - local scope */
  .ui-dense {
    font-size: 0.9375rem;   /* ~15px */
    line-height: 1.25rem;
  }

  .ui-dense .input-field,
  .ui-dense input[type="text"],
  .ui-dense input[type="tel"],
  .ui-dense input[type="date"],
  .ui-dense select {
    padding-top: 0.5rem;    /* py-2 */
    padding-bottom: 0.5rem;
  }

  .ui-dense textarea {
    padding: 0.5rem 0.75rem;
  }

  .ui-dense h2 {
    font-size: 1rem;         /* text-base */
    margin-bottom: 0.75rem;  /* mb-3 */
  }

  .ui-dense .space-y-4 > * + * {
    margin-top: 0.75rem;     /* space-y-3 */
  }
}
